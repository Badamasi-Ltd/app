import{r as e,o as t,c as a,a as s,C as l,q as r,b as i,t as o,F as n,d,e as h,f as u,g as c,n as p,h as m}from"./vendor.b940062b.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const s=new URL(e,location),l=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,r)=>{const i=new URL(e,s);if(self[t].moduleMap[i])return a(self[t].moduleMap[i]);const o=new Blob([`import * as m from '${i}';`,`${t}.moduleMap['${i}']=m;`],{type:"text/javascript"}),n=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(o),onerror(){r(new Error(`Failed to import: ${e}`)),l(n)},onload(){a(self[t].moduleMap[i]),l(n)}});document.head.appendChild(n)})),self[t].moduleMap={}}}("/upwork_visualization/assets/");const b={name:"App",watch:{$route(e,t){let a="Upwork Visualization";"string"==typeof e.meta.title?a=`${e.meta.title} - Upwork Visualization`:"function"==typeof e.meta.title&&(a=`${e.meta.title(e)} - Upwork Visualization`),document.title=a}},data:()=>({top:!1}),created(){window.addEventListener("scroll",this.handleScroll)},methods:{scrollTop(){window.scrollTo(0,0)},handleScroll(e){document.body.scrollTop>150||document.documentElement.scrollTop>150?this.top=!0:this.top=!1}}},w={class:""};b.render=function(l,r,i,o,n,d){const h=e("router-view");return t(),a("div",w,[s(h)])};const f={name:"EarningChart",props:{labels:{required:!0,type:Array},datasets:{required:!0,type:Array}},data(){return{ChartData:{type:"line",data:{labels:this.labels,datasets:[{label:"Earning",data:this.datasets.earning,backgroundColor:"#289c38",borderColor:"#39db4f",borderWidth:3},{label:"Withdraw",data:this.datasets.withdraw,backgroundColor:"#db3939",borderColor:"#fc6262s",borderWidth:1},{label:"Service Fee",data:this.datasets.serviceFee,backgroundColor:"#32b8c9",borderColor:"#53cbdb",borderWidth:1},{label:"Membership",data:this.datasets.membership,backgroundColor:"#9d34d1",borderColor:"#a556cc",borderWidth:1},{label:"Refund",data:this.datasets.refund,backgroundColor:"#e6dd37",borderColor:"#e3dd68",borderWidth:1},{label:"Withdraw Fee",data:this.datasets.withdrawFee,backgroundColor:"#f08d30",borderColor:"#f0a660",borderWidth:1}]},options:{responsive:!0,lineTension:1,scales:{yAxes:[{ticks:{beginAtZero:!1,padding:10}}]}}}}},mounted(){console.log("Chart mounted",this.labels);const e=document.getElementById("chart");new l(e,this.ChartData)}},y=s("canvas",{id:"chart"},null,-1);f.render=function(e,s,l,r,i,o){return t(),a("div",null,[y])};const g={name:"Home",components:{Vue3ChartJs:r,EarningChart:f},data:()=>({labels:[],dataset:[],loading:!1,loaded:!1,data:{},earning:[],withdraw:[],serviceFee:[],membership:[],withdrawFee:[],refund:[],validType:["application/vnd.ms-excel"]}),methods:{clear(){confirm("Are you sure, this action can not be undone")&&(this.data=[],this.loaded=!1,this.refund=[],this.withdrawFee=[],this.serviceFee=[],this.dataset=[],this.labels=[],this.withdraw=[],this.membership=[],this.earning=[])},sum(e){let t=0;for(let a in e)t+=Math.abs(e[a].Amount);return t},readfile(e){let t=new FileReader;t.onload=()=>{this.data=JSON.parse(function(e){let t=e.split("\n"),a=[],s=t[0].split(",");for(let l=1;l<t.length;l++){let e={},r=t[l].split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let t=0;t<s.length;t++)e[s[t]]=r[t];a.push(e)}return JSON.stringify(a)}(t.result));let e=[],a=[],s=[],l=[],r=[],i=[],o=[],n={earning:[],withdraw:[],membership:[],withdrawFee:[],serviceFee:[],refund:[]};for(let t in this.data)"Fixed Price"!==this.data[t].Type&&"Hourly"!==this.data[t].Type&&"Bonus"!==this.data[t].Type&&"Miscellaneous"!==this.data[t].Type&&"Adjustment"!==this.data[t].Type||(e.push(this.data[t]),o.push(this.data[t].Date.replace('"',"").replace('"',"")),n.earning.push(Math.abs(this.data[t].Amount))),"Withdrawal"===this.data[t].Type&&(s.push(this.data[t]),n.withdraw.push(Math.abs(this.data[t].Amount))),"Service Fee"===this.data[t].Type&&(a.push(this.data[t]),n.serviceFee.push(Math.abs(this.data[t].Amount))),"Refund"===this.data[t].Type&&(l.push(this.data[t]),n.refund.push(Math.abs(this.data[t].Amount))),"Membership Fee"===this.data[t].Type&&(r.push(this.data[t]),n.membership.push(Math.abs(this.data[t].Amount))),"Withdrawal Fee"===this.data[t].Type&&(i.push(this.data[t]),n.withdrawFee.push(Math.abs(this.data[t].Amount)));this.labels=o,this.dataset=n,this.earning=e,this.serviceFee=a,this.withdraw=s,this.refund=l,this.membership=r,this.withdrawFee=i,this.loaded=!0,console.log("map",this.dataset)},t.readAsBinaryString(e.target.files[0]),e.target.value=""}},computed:{getFooterPosition(){return this.loaded?"noPrint":"fixed"},total(e){let t=this.sum(this.refund),a=0;for(let s in this.earning){let e=this.earning[s].Amount;if(0!==e)if(e>500){let t=e-500;a+=400,a+=t-.1*t}else a+=e-.2*e}return a-=t,{sum:parseFloat(a).toFixed(2),refund:parseFloat(t).toFixed(2),withdraw:parseFloat(this.sum(this.withdraw)).toFixed(2),fee:parseFloat(this.sum(this.serviceFee)).toFixed(2),membership:parseFloat(this.sum(this.membership)).toFixed(2),withdrawFee:parseFloat(this.sum(this.withdrawFee)).toFixed(2)}}}},v=s("nav",{class:"header noPrint"},[s("div",{class:"text ml-5"}," Upwork Visualization "),s("a",{class:"source",href:"https://github.com/lablnet/upwork_visualization"},"Source Code")],-1),F={class:"mt-5 justify-content-center"},C={class:"container"},T={key:0,class:""},k=s("h1",null,"Drop your file here.",-1),A={class:"form-group"},U=s("label",null,"File",-1),S=s("h1",null,"How to get transaction history CSV?",-1),D=s("a",{href:"https://support.upwork.com/hc/en-us/articles/211068188-Invoices-and-Transactions"}," Follow the follwing guide",-1),M={key:1,class:"col"},x=s("a",{style:{float:"right"},href:"javascript:window.print()",class:"noPrint"},"print this page",-1),j=s("br",null,null,-1),E=s("h1",null,"Here's is your report.",-1),R={key:2,class:"row mt-4"},W={class:"col-md-8"},P=s("h1",{class:"h2"},"Chart:",-1),$={style:{display:"flex","flex-direction":"column"}},z={class:"col-md-4"},L=s("h1",{class:"h2"},"Stats:",-1),_=s("b",null,"Total earning: ",-1),V=h(),H=h(),I=s("br",null,null,-1),O=s("b",null,"Total withdraw: ",-1),q=h(),B=h(),J=s("br",null,null,-1),N=s("b",null,"Total Withdraw Fee: ",-1),Z=h(),G=h(),K=s("br",null,null,-1),Q=s("b",null,"Total refund: ",-1),X=h(),Y=h(),ee=s("br",null,null,-1),te=s("b",null,"Total Upwork Fee: ",-1),ae=h(),se=h(),le=s("br",null,null,-1),re=s("b",null,"Total Spend on Upwork: ",-1),ie=h(),oe=h(),ne=s("br",null,null,-1),de={key:3,class:"table-responsive"},he=s("h1",{class:"mt-3 h2"},"Feeds:",-1),ue={class:"table table-primary"},ce=s("thead",null,[s("tr",null,[s("th",null,"ID"),s("th",null,"Date"),s("th",null,"Type"),s("th",null,"Team"),s("th",null,"Description"),s("th",null,"Amount")])],-1),pe={key:0},me=s("p",{class:"note"},[s("b",null,"Note: This is an open source project built using Javascript, vuejs and chartjs, no server is involved here, your file is not uploaded to any server. For confirmation you can look to source code.")],-1),be=s("p",{class:"copyright"},[h("Made with ðŸ’• by "),s("a",{href:"https://www.upwork.com/fl/lablnet"},"Muhammad Umer Farooq"),h(".")],-1),we=s("a",{href:"https://github.com/lablnet/upwork_visualization"},"Source Code",-1);g.render=function(l,r,h,u,c,p){const m=e("EarningChart");return t(),a(n,null,[v,s("main",F,[s("div",C,[c.loaded?i("",!0):(t(),a("div",T,[k,s("div",A,[U,s("input",{type:"file",onChange:r[1]||(r[1]=(...e)=>p.readfile&&p.readfile(...e)),class:"form-control-file"},null,32)]),S,D])),c.loaded?(t(),a("div",M,[s("a",{style:{float:"left"},href:"javascript:void(0);",onClick:r[2]||(r[2]=(...e)=>p.clear&&p.clear(...e)),class:"noPrint"},"Clear"),x,j,E])):i("",!0),c.loaded?(t(),a("div",R,[s("div",W,[P,s("div",$,[s(m,{labels:c.labels,datasets:c.dataset},null,8,["labels","datasets"])])]),s("div",z,[L,_,V,s("i",null,o(p.total.sum)+" USD",1),H,I,O,q,s("i",null,o(p.total.withdraw)+" USD",1),B,J,N,Z,s("i",null,o(p.total.withdrawFee)+" USD",1),G,K,Q,X,s("i",null,o(p.total.refund)+" USD",1),Y,ee,te,ae,s("i",null,o(p.total.fee)+" USD",1),se,le,re,ie,s("i",null,o(p.total.membership)+" USD",1),oe,ne])])):i("",!0),c.loaded?(t(),a("div",de,[he,s("table",ue,[ce,(t(!0),a(n,null,d(c.earning,((e,l)=>(t(),a("tbody",{key:l},[e["Ref ID"]?(t(),a("tr",pe,[s("td",null,o(e["Ref ID"]),1),s("td",null,o(e.Date.replace('"',"")),1),s("td",null,o(e.Type),1),s("td",null,o(e.Team),1),s("td",null,o(e.Description),1),s("td",null,o(e.Amount),1)])):i("",!0)])))),128))])])):i("",!0)])]),s("footer",{class:p.getFooterPosition},[me,be,we],2)],64)};const fe=[{path:"/",component:g,meta:{title:"Home"}}];const ye=u({history:c(),routes:fe});ye.beforeEach(((e,t,a)=>{e.matched.some((e=>e.meta.requiresAuth)),e.name&&p.start(),a()})),ye.afterEach(((e,t)=>{p.done()}));m(b).use(ye).mount("#app");
