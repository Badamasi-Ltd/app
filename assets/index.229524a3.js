import{r as t,o as e,c as a,a as l,C as s,q as r,b as o,t as i,F as n,d,e as h,w as u,f as c,g as p,n as m,h as b}from"./vendor.085a60a4.js";!function(t=".",e="__import__"){try{self[e]=new Function("u","return import(u)")}catch(a){const l=new URL(t,location),s=t=>{URL.revokeObjectURL(t.src),t.remove()};self[e]=t=>new Promise(((a,r)=>{const o=new URL(t,l);if(self[e].moduleMap[o])return a(self[e].moduleMap[o]);const i=new Blob([`import * as m from '${o}';`,`${e}.moduleMap['${o}']=m;`],{type:"text/javascript"}),n=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(i),onerror(){r(new Error(`Failed to import: ${t}`)),s(n)},onload(){a(self[e].moduleMap[o]),s(n)}});document.head.appendChild(n)})),self[e].moduleMap={}}}("/assets/");const f={name:"App",watch:{$route(t,e){let a="Upwork Visualization";"string"==typeof t.meta.title?a=`${t.meta.title} - Upwork Visualization`:"function"==typeof t.meta.title&&(a=`${t.meta.title(t)} - Upwork Visualization`),document.title=a}},data:()=>({top:!1}),created(){window.addEventListener("scroll",this.handleScroll)},methods:{scrollTop(){window.scrollTo(0,0)},handleScroll(t){document.body.scrollTop>150||document.documentElement.scrollTop>150?this.top=!0:this.top=!1}}},w={class:""};f.render=function(s,r,o,i,n,d){const h=t("router-view");return e(),a("div",w,[l(h)])};const y={name:"EarningChart",props:{labels:{required:!0,type:Array},datasets:{required:!0,type:Array}},data(){return{ChartData:{type:"line",data:{labels:this.labels,datasets:[{label:"Earning",data:this.datasets.earning,backgroundColor:"#289c38",borderColor:"#39db4f",borderWidth:3},{label:"Withdraw",data:this.datasets.withdraw,backgroundColor:"#db3939",borderColor:"#fc6262s",borderWidth:1},{label:"Service Fee",data:this.datasets.serviceFee,backgroundColor:"#32b8c9",borderColor:"#53cbdb",borderWidth:1},{label:"Membership",data:this.datasets.membership,backgroundColor:"#9d34d1",borderColor:"#a556cc",borderWidth:1},{label:"Refund",data:this.datasets.refund,backgroundColor:"#e6dd37",borderColor:"#e3dd68",borderWidth:1},{label:"Withdraw Fee",data:this.datasets.withdrawFee,backgroundColor:"#f08d30",borderColor:"#f0a660",borderWidth:1}]},options:{responsive:!0,lineTension:1,scales:{yAxes:[{ticks:{beginAtZero:!1,padding:10}}]}}}}},mounted(){console.log("Chart mounted",this.labels);const t=document.getElementById("chart");new s(t,this.ChartData)}},g=l("canvas",{id:"chart"},null,-1);y.render=function(t,l,s,r,o,i){return e(),a("div",null,[g])};const F={name:"Home",components:{Vue3ChartJs:r,EarningChart:y},data:()=>({labels:[],dataset:[],loading:!1,loaded:!1,data:{},earning:[],withdraw:[],serviceFee:[],membership:[],withdrawFee:[],refund:[],validType:["application/vnd.ms-excel"]}),methods:{clear(){confirm("Are you sure, this action can not be undone")&&(this.data=[],this.loaded=!1,this.refund=[],this.withdrawFee=[],this.serviceFee=[],this.dataset=[],this.labels=[],this.withdraw=[],this.membership=[],this.earning=[])},sum(t){let e=0;for(let a in t)e+=Math.abs(t[a].Amount);return e},readfile(t){let e=new FileReader;e.onload=()=>{this.data=JSON.parse(function(t){let e=t.split("\n"),a=[],l=e[0].split(",");for(let s=1;s<e.length;s++){let t={},r=e[s].split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let e=0;e<l.length;e++)t[l[e]]=r[e];a.push(t)}return JSON.stringify(a)}(e.result));let t=[],a=[],l=[],s=[],r=[],o=[],i=[],n={earning:[],withdraw:[],membership:[],withdrawFee:[],serviceFee:[],refund:[]};for(let e in this.data)"Fixed Price"!==this.data[e].Type&&"Hourly"!==this.data[e].Type&&"Bonus"!==this.data[e].Type&&"Miscellaneous"!==this.data[e].Type&&"Adjustment"!==this.data[e].Type||(t.push(this.data[e]),i.push(this.data[e].Date.replace('"',"").replace('"',"")),n.earning.push(Math.abs(this.data[e].Amount))),"Withdrawal"===this.data[e].Type&&(l.push(this.data[e]),n.withdraw.push(Math.abs(this.data[e].Amount))),"Service Fee"===this.data[e].Type&&(a.push(this.data[e]),n.serviceFee.push(Math.abs(this.data[e].Amount))),"Refund"===this.data[e].Type&&(s.push(this.data[e]),n.refund.push(Math.abs(this.data[e].Amount))),"Membership Fee"===this.data[e].Type&&(r.push(this.data[e]),n.membership.push(Math.abs(this.data[e].Amount))),"Withdrawal Fee"===this.data[e].Type&&(o.push(this.data[e]),n.withdrawFee.push(Math.abs(this.data[e].Amount)));this.labels=i,this.dataset=n,this.earning=t,this.serviceFee=a,this.withdraw=l,this.refund=s,this.membership=r,this.withdrawFee=o,this.loaded=!0,console.log("map",this.dataset)},e.readAsBinaryString(t.target.files[0]),t.target.value=""}},computed:{getFooterPosition(){return this.loaded?"noPrint":"fixed"},total(t){let e=this.sum(this.refund),a=0;for(let l in this.earning){let t=this.earning[l].Amount;if(0!==t)if(t>500){let e=t-500;a+=400,a+=e-.1*e}else a+=t-.2*t}return a-=e,{sum:parseFloat(a).toFixed(2),refund:parseFloat(e).toFixed(2),withdraw:parseFloat(this.sum(this.withdraw)).toFixed(2),fee:parseFloat(this.sum(this.serviceFee)).toFixed(2),membership:parseFloat(this.sum(this.membership)).toFixed(2),withdrawFee:parseFloat(this.sum(this.withdrawFee)).toFixed(2)}}}},v=l("nav",{class:"header noPrint"},[l("div",{class:"text ml-5"}," Upwork Visualization "),l("a",{class:"source",href:"https://github.com/lablnet/upwork_visualization"},"Source Code")],-1),T={class:"mt-5 justify-content-center"},k={class:"container"},C={key:0,class:""},A=l("h1",null,"Drop your file here.",-1),U={class:"form-group"},S=l("label",null,"File",-1),D=l("h1",null,"How to get transaction history CSV?",-1),M=l("a",{href:"https://support.upwork.com/hc/en-us/articles/211068188-Invoices-and-Transactions"}," Follow the follwing guide",-1),x={key:1,class:"col"},j=l("a",{style:{float:"right"},href:"javascript:window.print()",class:"noPrint"},"print this page",-1),E=l("br",null,null,-1),R=l("h1",null,"Here's is your report.",-1),W={key:2,class:"row mt-4"},P={class:"col-md-8"},$=l("h1",{class:"h2"},"Chart:",-1),L={style:{display:"flex","flex-direction":"column"}},_={class:"col-md-4"},z=l("h1",{class:"h2"},"Stats:",-1),H=l("b",null,"Total earning: ",-1),V=h(),I=h(),N=l("br",null,null,-1),O=l("b",null,"Total withdraw: ",-1),q=h(),B=h(),J=l("br",null,null,-1),Z=l("b",null,"Total Withdraw Fee: ",-1),G=h(),K=h(),Q=l("br",null,null,-1),X=l("b",null,"Total refund: ",-1),Y=h(),tt=h(),et=l("br",null,null,-1),at=l("b",null,"Total Upwork Fee: ",-1),lt=h(),st=h(),rt=l("br",null,null,-1),ot=l("b",null,"Total Spend on Upwork: ",-1),it=h(),nt=h(),dt=l("br",null,null,-1),ht={key:3,class:"table-responsive"},ut=l("h1",{class:"mt-3 h2"},"Feeds:",-1),ct={class:"table table-primary"},pt=l("thead",null,[l("tr",null,[l("th",null,"ID"),l("th",null,"Date"),l("th",null,"Type"),l("th",null,"Team"),l("th",null,"Description"),l("th",null,"Amount")])],-1),mt={key:0},bt=l("p",{class:"note"},[l("b",null,"Note: This is an open source project built using Javascript, vuejs and chartjs, no server is involved here, your file is not uploaded to any server. For confirmation you can look to source code.")],-1),ft=l("p",{class:"copyright"},[h("Made with ðŸ’• by "),l("a",{href:"https://www.upwork.com/fl/lablnet"},"Muhammad Umer Farooq"),h(".")],-1),wt=l("a",{href:"https://github.com/lablnet/upwork_visualization"},"Source Code",-1);F.render=function(s,r,h,u,c,p){const m=t("EarningChart");return e(),a(n,null,[v,l("main",T,[l("div",k,[c.loaded?o("",!0):(e(),a("div",C,[A,l("div",U,[S,l("input",{type:"file",onChange:r[1]||(r[1]=(...t)=>p.readfile&&p.readfile(...t)),class:"form-control-file"},null,32)]),D,M])),c.loaded?(e(),a("div",x,[l("a",{style:{float:"left"},href:"javascript:void(0);",onClick:r[2]||(r[2]=(...t)=>p.clear&&p.clear(...t)),class:"noPrint"},"Clear"),j,E,R])):o("",!0),c.loaded?(e(),a("div",W,[l("div",P,[$,l("div",L,[l(m,{labels:c.labels,datasets:c.dataset},null,8,["labels","datasets"])])]),l("div",_,[z,H,V,l("i",null,i(p.total.sum)+" USD",1),I,N,O,q,l("i",null,i(p.total.withdraw)+" USD",1),B,J,Z,G,l("i",null,i(p.total.withdrawFee)+" USD",1),K,Q,X,Y,l("i",null,i(p.total.refund)+" USD",1),tt,et,at,lt,l("i",null,i(p.total.fee)+" USD",1),st,rt,ot,it,l("i",null,i(p.total.membership)+" USD",1),nt,dt])])):o("",!0),c.loaded?(e(),a("div",ht,[ut,l("table",ct,[pt,(e(!0),a(n,null,d(c.earning,((t,s)=>(e(),a("tbody",{key:s},[t["Ref ID"]?(e(),a("tr",mt,[l("td",null,i(t["Ref ID"]),1),l("td",null,i(t.Date.replace('"',"")),1),l("td",null,i(t.Type),1),l("td",null,i(t.Team),1),l("td",null,i(t.Description),1),l("td",null,i(t.Amount),1)])):o("",!0)])))),128))])])):o("",!0)])]),l("footer",{class:p.getFooterPosition},[bt,ft,wt],2)],64)};const yt={},gt={class:"text-center mt-5"},Ft=l("h3",null,"404 Not Found!",-1),vt=l("p",null,"The page you looking for may deleted or not available.",-1),Tt=h("Home");yt.render=function(s,r){const o=t("router-link");return e(),a("div",gt,[Ft,vt,l(o,{class:"btn btn-info",to:"/"},{default:u((()=>[Tt])),_:1})])};const kt=[{path:"/",component:F,meta:{title:"Home"}},{path:"/:catchAll(.*)",component:yt,meta:{title:"404 Not Found"}}];const Ct=c({history:p(),routes:kt});Ct.beforeEach(((t,e,a)=>{t.matched.some((t=>t.meta.requiresAuth)),t.name&&m.start(),a()})),Ct.afterEach(((t,e)=>{m.done()}));b(f).use(Ct).mount("#app");
